# 2장 기초

이번장에는 고급 자바스크립트 코드를 작성하는 데 핵심이 되는 모범적인 관행관 습관, 패턴을 검토한다.

- 전역 변수의 사용 최소화
- var 선언은 한번만
- 루프 내에서 length 캐시
- 코딩 규칙을 준수
- API 문서 작성
- 동료 리뷰 수행
- JSLint 실행

## 2.1 유지보수 가능한 코드 작성

### 코드 재해석에 시간이 필요한 이유
- 문제를 다시 학습하고 이해하기
- 문제를 해결하는 코드를 이해하기

### 코드의 변경원인
- 버그 발견
- 새로운 기능 추가
- 새로운 환에서 동작(새로운 브라우저 출시 등)
- 코드의 용도 변경
- 코드를 처음부터 완전히 재작성하게 되거나 다른 구조 심지어 다른 언어로 옮김

### 유지보수 가능한 코드
- 읽기 쉽다.
- 일관적이다.
- 예측 가능하다.
- 한 사람이 작성한 것처럼 보인다.
- 문서화되어 있다.

## 2.2 전역 변수 최소화

### 자바스크립트의 **유효범위**는 **함수**를 통해 관리된다. (블럭이 아님)
- **지역변수**: 함수 안에서 선언된 변수로 함수 외부에서는 사용할 수 없다.
- **전역변수**: 어떤 함수에도속하지 않고 선언되거나, 아예 선언되지 않은 채로 사용되는 변수.

### 전역객체(gloal object)
- 어떤 함수에도 속하지 않은 상태에서 ``this``에 접근하면 전역 객체에 접근하게 된다.
- 전역 변수를 생성하는 것은, 이 전역 객체의 프로퍼티를 만드는 것.
- 브라우저에는 전역 객체에 ``window``라는 부가적인 프로퍼티가 존재하며 전역 객체 자신을 가리킨다.

```javascript
myglobal = "hello";     // 안티패턴
console.log(myglobal);  // "hello"
console.log(window.myglobal);    // "hello"
console.log(window.["myglobal"]);   // "hello"
console.log(this.myglobal);  // "hello"
```

### 전역변수의 문제점 객체의 프로퍼티(젼역 변수)가 된다.
- JS 애플리케이션, 웹 페이지 내에서 모두 공유된다.
- 다른 동일 이름의 전역 변수가 있으면 덮여 쓰이게 된다.
- **implied globals(암묵적 전역)** : 선언하지 않은 변수는 자동으로 전역

```javascript
function sum(x,y){
    // 안티패턴: 암묵적 전역
    result = x + y;   // 함수를 실행하는 순간 result는 전역이 된다.
    // var result = x + y;  // var선언하면 함수 안에서의 지역변수. 함수 실행 후에 result도 휘발된다.
    return result;
}
```

이 함수를 호출하고 나면 전역 네임스페이스에 result라는 변수가 남아 문제를 일으킬 수 있다.

- 개선된 코드
```javascript
function sum(x,y){
    var result = x + y;
    return result;
}
```